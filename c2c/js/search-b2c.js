require(["jquery","utils","dot"],function(a,b,c){"use strict";var d,e=b.getParameter("key"),f=b.getParameter("bizType");d={count:"",clickBrand:!0,clickColor:!0,selectbrandList:[],service:[],selectExtAttrList:[],attrs:[],brandList:"",extAttrList:"",brand:[],debug:!0,page:1,pageBei:1,pageSize:20,sortKey:"default",order:"desc",isLoading:!1,isAllLoad:!1,init:function(){d.searchListBei(d.pageBei,e,f)},addbrand:function(){for(var b=0;b<a(".ui-area-class .ui-li[state=0]").length;b++){var c={brandId:"",name:""};c.brandId=a(".ui-area-class .ui-li[state=0]").eq(b).attr("brandid"),c.name=a(".ui-area-class .ui-li[state=0]").eq(b).text(),d.brand.push(c)}return d.brand},addselectbrandList:function(){for(var b=0;b<a(".item-content-brand[state=0]").length;b++){var c={brandId:"",name:""};c.brandId=a(".item-content-brand[state=0]").eq(b).attr("brandid"),c.name=a(".item-content-brand[state=0]").eq(b).text(),d.selectbrandList.push(c)}return d.selectbrandList},addattrs:function(){for(var b=0;b<a(".ui-area-class-color .ui-li[state=0]").length;b++){var c={key:"",value:""};c.key=a(".ui-area-class-color .ui-li[state=0]").eq(b).attr("key"),c.value=a(".ui-area-class-color .ui-li[state=0]").eq(b).attr("value"),d.attrs.push(c)}return d.attrs},addselectExtAttrList:function(){for(var b=0;b<a("#item-color .item").length;b++){var c={attrs:[],expandId:""};c.expandId=a("#item-color .item").eq(b).attr("expandId"),console.log(a("#item-color .item").eq(b).children(".item-content ul li[state=0]").length);for(var e=0;e<a("#item-color .item").eq(b).children("li[state=0]").length;e++){var f={key:"",value:""};f.key=a("#item-color .item").eq(b).children("li[state=0]").eq(e).attr("key"),f.value=a("#item-color .item").eq(b).children("li[state=0]").eq(e).attr("value"),c.attrs.push(f),console.log(JSON.stringify(c.attrs))}d.selectExtAttrList.push(c)}return d.selectExtAttrList},addservice:function(){for(var b=0;b<a(".service").length;b++){var c={key:"",name:"",value:""};c.key=a(".service[state=0]").eq(b).attr("key"),c.name=a(".service[state=0]").eq(b).attr("name"),c.value=a(".service[state=0]").eq(b).attr("value"),d.service.push(c)}return d.service},addClick:function(){a(".ui-price").unbind("click").click("click",function(){a(".ui-area-class").hide(),a(this).css("color","rgb(252,82,71)"),a(".ui-push").css("color","rgb(0,0,0)"),a(".ui-alern").css("color","rgb(0,0,0)"),d.isAllLoad=!1,d.pageBei=1,1==a(this).attr("deg")?(d.sortKey="price",d.order="asc",d.searchListDefault(1,e,f,d.sortKey,d.order),a(this).attr("deg","0"),a(".ui-price .ui-up").attr("src","image/up-red.png"),a(".ui-price .ui-down").attr("src","image/down.png")):0==a(this).attr("deg")&&(d.sortKey="price",d.order="desc",d.searchListDefault(1,e,f,d.sortKey,d.order),a(this).attr("deg","1"),a(".ui-price .ui-up").attr("src","image/up.png"),a(".ui-price .ui-down").attr("src","image/down-red.png"))}),a(".ui-push").unbind("click").click("click",function(){a(".ui-area-class").hide(),a(this).css("color","rgb(252,82,71)"),a(".ui-price").css("color","rgb(0,0,0)"),a(".ui-alern").css("color","rgb(0,0,0)"),d.isAllLoad=!1,d.pageBei=1,d.sortKey="deal_num",d.order="desc",d.searchListDefault(1,e,f,d.sortKey,d.order),a(".ui-price .ui-up").attr("src","image/up.png"),a(".ui-price .ui-down").attr("src","image/down.png")}),a(".ui-alern").unbind("click").click("click",function(){a(".ui-area-class").hide(),a(this).css("color","rgb(252,82,71)"),a(".ui-price").css("color","rgb(0,0,0)"),a(".ui-push").css("color","rgb(0,0,0)"),d.isAllLoad=!1,d.pageBei=1,d.sortKey="default",d.order="desc",d.searchListDefault(1,e,f,d.sortKey,d.order),a(".ui-price .ui-up").attr("src","image/up.png"),a(".ui-price .ui-down").attr("src","image/down.png")}),a('.ui-card[type="searchType"]').unbind("click").bind("click",function(){"searchType"==a(this).attr("type")&&"13"==a(this).attr("typeId")&&(a(".ui-goods-box").hide(),a(".ui-goods-box-bei").show(),a(".ui-area-class").hide(),a(".bgview").hide(),f=a(this).attr("typeId"),d.searchListBeiclick(d.pageBei,e,f),a(".ui-nav >div").css("color","rgb(140,140,140)"),a(".ui-alern").css("color","rgb(252,82,71)"),a(".ui-price .ui-up").attr("src","image/up.png"),a(".ui-price .ui-down").attr("src","image/down.png"),a(this).css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),"searchType"==a(this).attr("type")&&"12"==a(this).attr("typeId")&&(a(".ui-goods-box").show(),a(".ui-goods-box-bei").hide(),a(".ui-area-class").hide(),a(".bgview").hide(),f=a(this).attr("typeId"),d.debug?(d.searchList(d.page,e,f),d.debug=!1):d.searchListTwo(d.page,e,f),a(".ui-nav >div").css("color","rgb(140,140,140)"),a(".ui-alern").css("color","rgb(252,82,71)"),a(".ui-price .ui-up").attr("src","image/up.png"),a(".ui-price .ui-down").attr("src","image/down.png"),a(this).css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"}))}),a(".ui-select").click(function(){a(".backView").show()}),a('.ui-card[type="brand"]').unbind("click").bind("click",function(){1==a(this).attr("state")?(a(this).css("background","white").css("border","1px solid rgb(140,140,140)"),a('.ui-card[type="expand"]').css("background","rgb(245,245,245)").css("border","none"),a('.ui-card[type="brand"] img').attr("src","image/up.png"),a(this).attr("state","0"),a(".ui-area-class").show(),a(".ui-area-class-color").hide(),a('.ui-card[type="expand"]').attr("state","1")):0==a(this).attr("state")&&(a(this).css("background","rgb(245,245,245)").css("border","none"),a('.ui-card[type="brand"] img').attr("src","image/down.png"),a(this).attr("state","1"),a(".ui-area-class").hide(),a(".ui-area-class-color").hide(),a('.ui-card[type="expand"]').attr("state","1")),a(".ui-area-class .ui-li").unbind("click").bind("click",function(){1==a(this).attr("state")?(a(this).css("color","rgb(252,82,71)"),a(this).attr("state","0")):0==a(this).attr("state")&&(a(this).css("color","rgb(23,23,23)"),a(this).attr("state","1")),a(this).children("img").toggle()})}),a('.ui-card[type="expand"]').unbind("click").bind("click",function(){1==a(this).attr("state")?(a('.ui-card[type="brand"]').css("background","rgb(245,245,245)").css("border","none"),a(this).css("background","white").css("border","1px solid rgb(140,140,140)"),a('.ui-card[type="expand"] img').attr("src","image/up.png"),a(this).attr("state","0"),a(".ui-area-class-color").show(),a(".ui-area-class").hide(),a('.ui-card[type="brand"]').attr("state","1"),a('.ui-card[type="brand"] img').attr("src","image/down.png")):0==a(this).attr("state")&&(a(this).css("background","rgb(245,245,245)").css("border","none"),a('.ui-card[type="expand"] img').attr("src","image/down.png"),a(this).attr("state","1"),a(".ui-area-class-color").hide(),a(".ui-area-class").hide(),a('.ui-card[type="brand"]').attr("state","1")),a(".ui-area-class-color .ui-li").unbind("click").bind("click",function(){1==a(this).attr("state")?(a(this).css("color","rgb(252,82,71)"),a(this).attr("state","0")):0==a(this).attr("state")&&(a(this).css("color","rgb(23,23,23)"),a(this).attr("state","1")),a(this).children("img").toggle()})}),a(".btn-sure").unbind("click").bind("click",function(){a(".backView").hide(),d.searchListDefaultselect(1,e,f,d.sortKey,d.order),d.selectbrandList=[],d.service=[],d.selectExtAttrList=[]}),a(".btn-reset").unbind("click").bind("click",function(){d.searchListDefault(1,e,f,d.sortKey,d.order),d.selectbrandList=[],d.service=[],d.selectExtAttrList=[],a(".priceStr").attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"}),a(".inputView .left").val(),a(".inputView .right").val(),a(".service").attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"}),a("#item-color li").attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"})}),a("#item-color li").unbind("click").bind("click",function(){1==a(this).attr("state")?a(this).attr("state","0").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}):0==a(this).attr("state")&&a(this).attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"})}),a(".service").unbind("click").bind("click",function(){1==a(this).attr("state")?a(this).attr("state","0").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}):0==a(this).attr("state")&&a(this).attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"})}),a(".priceStr").unbind("click").bind("click",function(){1==a(this).attr("state")?(a(this).attr("state","0").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"}),a(".inputView .left").val(a(this).attr("min")),a(".inputView .right").val(a(this).attr("max"))):0==a(this).attr("state")&&a(this).attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"})}),a(".item-content-brand").unbind("click").bind("click",function(){1==a(this).attr("state")?a(this).attr("state","0").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}):0==a(this).attr("state")&&a(this).attr("state","1").css({border:"none",background:"rgb(239,239,239)",color:"rgb(23,23,23)"})}),a(".backView").click(function(){a(".backView").hide()}),a(".contentView").unbind("click").bind("click",function(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0}),a(".ui-area-class").click(function(){a(".ui-area-class").hide(),a(".ui-card img").attr("src","image/down.png"),a(".ui-card").attr("state","1")}),a(".ui-area-class-color").click(function(){a(".ui-area-class-color").hide(),a(".ui-card img").attr("src","image/down.png"),a(".ui-card").attr("state","1")}),a(".ui-area-class .btn-right").unbind("click").bind("click",function(){a(".ui-area-class").hide(),a(".ui-card").attr("state","1"),d.clickBrand=!1,d.searchListDefault(1,e,f,d.sortKey,d.order),""!==d.addbrand()?a(".ui-card img").attr("src","image/down-red.png"):a(".ui-card img").attr("src","image/down.png"),d.brand=[],d.attrs=[]}),a(".ui-area-class-color .btn-right").unbind("click").bind("click",function(){a(".ui-area-class-color").hide(),a(".ui-card").attr("state","1"),d.clickColor=!1,d.searchListDefault(1,e,f,d.sortKey,d.order),""!==d.addattrs()?a(".ui-card img").attr("src","image/down-red.png"):a(".ui-card img").attr("src","image/down.png"),d.brand=[],d.attrs=[]}),a(".ui-area-class .btn-ltft").unbind("click").bind("click",function(){a(".ui-area-class .ui-li").css("color","rgb(23,23,23)"),a(".ui-area-class .ui-li").attr("state","1"),a(".ui-area-class .ui-li img").hide(),d.brand=[]}),a(".ui-area-class-color .btn-ltft").unbind("click").bind("click",function(){a(".ui-area-class-color .ui-li").css("color","rgb(23,23,23)"),a(".ui-area-class-color .ui-li").attr("state","1"),a(".ui-area-class-color .ui-li img").hide(),d.attrs=[]}),a(".ui-class").unbind("click").bind("click",function(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0}),a(".ui-btn").unbind("click").bind("click",function(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0}),a(".allClass").unbind("click").bind("click",function(){a(".panel-list").show()})},addScorll:function(){a(window).on("scroll",function(){var b=a(window).scrollTop(),c=a(window).height(),g=document.body.scrollHeight;!d.isLoading&&b+c+300>g&&(d.page+=1,d.isLoading=!0,Math.ceil(d.count/20)>=d.pageBei&&d.searchList(d.page,e,f,d.sortKey,d.order))})},addScorllBei:function(){a(window).on("scroll",function(){var b=a(window).scrollTop(),c=a(window).height(),g=document.body.scrollHeight;!d.isLoading&&b+c+300>g&&(d.pageBei+=1,d.isLoading=!0,Math.ceil(d.count/20)>=d.pageBei&&d.searchListDefaultAppend(d.pageBei,e,f,d.sortKey,d.order))})},searchListTwo:function(c,e,f){var g={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:"default",order:"desc"}})}};b.load(g).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,d.addScorll(),d.priceList=c.data.priceList||[],d.serviceList=c.data.serviceList||[],d.renderSearchextServiceList(d.serviceList),d.renderSearchextPriceList(d.priceList),c.data.brandList&&c.data.brandList.length>0&&(d.brandList=c.data.brandList||[],d.renderSearchBrandlist(d.brandList),d.renderSearchextSeleatBrandList(d.brandList)),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList||[],d.expandId=c.data.extAttrList[0].expandId,d.renderSearchextAttrList(c.data.extAttrList[0].attrs),d.renderSearchextSeleatColorList(d.extAttrList)),c.data.catList&&c.data.catList.length>0&&(d.catList=c.data.catList||[],d.renderSearchextSeleatCatList(d.catList)),c.data.filterList&&c.data.filterList.length>0?(d.renderSearchFilterlist(c.data.filterList),d.brandList=c.data.brandList,a(".ui-card[typeId=12]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})):1==d.page&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchList:function(c,e,f,g,h){var i={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:g,order:h}})}};b.load(i).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,d.addScorll(),d.priceList=c.data.priceList||[],d.serviceList=c.data.serviceList||[],d.renderSearchextServiceList(d.serviceList),d.renderSearchextPriceList(d.priceList),c.data.brandList&&c.data.brandList.length>0&&(d.brandList=c.data.brandList||[],d.renderSearchBrandlist(d.brandList),d.renderSearchextSeleatBrandList(d.brandList)),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList||[],d.expandId=c.data.extAttrList[0].expandId,d.renderSearchextAttrList(c.data.extAttrList[0].attrs),d.renderSearchextSeleatColorList(d.extAttrList)),c.data.catList&&c.data.catList.length>0&&(d.catList=c.data.catList||[],d.renderSearchextSeleatCatList(d.catList)),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),d.renderSearchList(c.data.itemList),d.renderSearchFilterlist(c.data.filterList),a(".ui-card[typeId=12]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"}),d.brandList=c.data.brandList,d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0)):1==d.page&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchListBei:function(c,e,f){var g={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:"default",order:"desc"}})}};b.load(g).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,a("title").html(e+"-商品搜索-拍拍 "),d.priceList=c.data.priceList||[],d.serviceList=c.data.serviceList||[],d.renderSearchextServiceList(c.data.serviceList),d.renderSearchextPriceList(c.data.priceList),c.data.filterList&&c.data.filterList.length>0&&(d.renderSearchFilterlist(c.data.filterList),a(".ui-card[typeId=13]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),c.data.brandList&&c.data.brandList.length>0&&(d.brandList=c.data.brandList||[],d.renderSearchBrandlist(d.brandList),d.renderSearchextSeleatBrandList(d.brandList)),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList||[],d.expandId=c.data.extAttrList[0].expandId,d.renderSearchextAttrList(c.data.extAttrList[0].attrs),d.renderSearchextSeleatColorList(d.extAttrList)),c.data.catList&&c.data.catList.length>0&&(d.catList=c.data.catList||[],d.renderSearchextSeleatCatList(d.catList)),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),d.renderSearchListBei(c.data.itemList),d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.addScorllBei()):1==d.pageBei&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchListBeiclick:function(c,e,f){var g={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:"default",order:"desc"}})}};b.load(g).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,d.addScorllBei(),d.priceList=c.data.priceList||[],d.serviceList=c.data.serviceList||[],d.renderSearchextServiceList(d.serviceList),d.renderSearchextPriceList(d.priceList),d.brandList=c.data.brandList||[],d.renderSearchBrandlist(d.brandList),d.renderSearchextSeleatBrandList(d.brandList),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList||[],d.expandId=c.data.extAttrList[0].expandId,d.renderSearchextAttrList(c.data.extAttrList[0].attrs),d.renderSearchextSeleatColorList(d.extAttrList)),c.data.catList&&c.data.catList.length>0&&(d.catList=c.data.catList||[],d.renderSearchextSeleatCatList(d.catList)),c.data.filterList&&c.data.filterList.length>0&&(d.renderSearchFilterlist(c.data.filterList),a(".ui-card[typeId=13]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0)):1==d.pageBei&&(a(".bgview").show(),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchListDefault:function(c,e,f,g,h){var i={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:g,order:h},brand:d.addbrand(),extAttrList:[{attrs:d.addattrs(),expandId:d.expandId}]})}};b.load(i).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,d.priceList=c.data.priceList||[],d.serviceList=c.data.serviceList||[],d.renderSearchextServiceList(d.serviceList),d.renderSearchextPriceList(d.priceList),c.data.brandList&&c.data.brandList.length>0&&(d.brandList=c.data.brandList||[],d.clickBrand||d.renderSearchBrandlist(d.brandList),d.renderSearchextSeleatBrandList(d.brandList)),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList||[],d.expandId=c.data.extAttrList[0].expandId,d.clickColor||d.renderSearchextAttrList(c.data.extAttrList[0].attrs),d.renderSearchextSeleatColorList(d.extAttrList)),c.data.catList&&c.data.catList.length>0&&(d.catList=c.data.catList||[],d.renderSearchextSeleatCatList(d.catList)),c.data.filterList&&c.data.filterList.length>0&&(d.renderSearchFilterlist(c.data.filterList),13==f?a(".ui-card[typeId=13]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"}):12==f&&a(".ui-card[typeId=12]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),13==f?(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchListBeihtml(c.data.itemList),d.addScorllBei()):12==f&&(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchListHtml(c.data.itemList),d.addScorll())):1==d.pageBei&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchListDefaultAppend:function(c,e,f,g,h){var i={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:g,order:h}})}};b.load(i).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,c.data.filterList&&c.data.filterList.length>0&&(d.renderSearchFilterlist(c.data.filterList),a(".ui-card[typeId=13]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),c.data.brandList&&c.data.brandList.length>0&&(d.brandList=c.data.brandList),c.data.extAttrList&&c.data.extAttrList.length>0&&(d.extAttrList=c.data.extAttrList[0].attrs),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),13==f?(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchListBei(c.data.itemList),d.addScorllBei()):12==f&&(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchList(c.data.itemList),d.addScorll())):1==d.pageBei&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},searchListDefaultselect:function(c,e,f,g,h){var i={url:b.getHost()+"/search/v1/search",data:{query:JSON.stringify({pageNo:c,pageSize:"20",key:e,bizType:f,sort:{sortKey:g,order:h},brand:d.addselectbrandList(),extAttrList:d.addselectExtAttrList(),service:d.addservice(),price:[{min:a(".inputView .left").val(),max:a(".inputView .right").val()}]})}};b.load(i).then(function(c){b.log(c),console.log(c),"0"==c.code?(d.count=c.data.count,c.data.filterList&&c.data.filterList.length>0&&(d.renderSearchFilterlist(c.data.filterList),13==f?a(".ui-card[typeId=13]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"}):12==f&&a(".ui-card[typeId=12]").css({border:"1px solid red",background:"rgb(255,255,255)",color:"rgb(252,82,71)"}).siblings().css({border:"none",background:"rgb(239,239,239)",color:"rgb(140,140,140)"})),c.data.itemList&&c.data.itemList.length>0?(a(".bgview").hide(),13==f?(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchListBeihtml(c.data.itemList),d.addScorllBei()):12==f&&(d.isLoading=!1,(!c.data.itemList||c.data.itemList.length<d.pageSize+1)&&(d.isAllLoad=!0),d.renderSearchListHtml(c.data.itemList),d.addScorll())):1==d.pageBei&&(a(".bgview").removeClass("hide"),a(".bgview p").text("对不起，没有找到和"+e+"相关的结果")),d.addClick()):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取搜索商品异常")},function(a){})},getScrollTop:function(){var a=0;return document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a},showHide:function(){var b=a(".ui-nav").height();a(window).off("scroll touchstart touchmove  touchend").on("scroll touchstart touchmove  touchend",function(c){g>1||d.getScrollTop()<b?(a(".ui-nav").show(),a(".ui-nav-class").css("top","1rem"),a(".ui-area-class").css("top","2.2rem")):-1>g&&(a(".ui-nav").hide(),a(".ui-nav-class").css("top","0"),a(".ui-area-class").css("top","1.06rem"))});var c,e,f,g,h,i=document.querySelector("body");i.addEventListener("touchstart",function(a){var b=a.touches[0];c={x:b.pageX,y:b.pageY}}),i.addEventListener("touchmove",function(a){var b=a.touches[0];e={x:b.pageX,y:b.pageY},f=e.x-c.x,g=e.y-c.y,h=Math.sqrt(Math.pow(Math.abs(f),2)+Math.pow(Math.abs(g),2))})},renderSearchList:function(b){b=b||[],a(".ui-goods-box2").append(c.template(a(".renderSearchList").text())(b)),a(".ui-goods-box").append(c.template(a(".renderSearchList").text())(b)),a(".ui-goods").click(function(){var b=a(this).attr("usedNo");location.href="//paipai.m.jd.com/m/goods_detail_c.html?usedNo="+b})},renderSearchListHtml:function(b){b=b||[],a(".ui-goods-box2").html(c.template(a(".renderSearchList").text())(b)),a(".ui-goods-box").html(c.template(a(".renderSearchList").text())(b)),a(".ui-goods").click(function(){var b=a(this).attr("usedNo");location.href="//paipai.m.jd.com/m/goods_detail_c.html?usedNo="+b})},renderSearchListBei:function(b){b=b||[],a(".ui-goods-box2-bei").append(c.template(a(".renderSearchList").text())(b)),a(".ui-goods-box-bei").append(c.template(a(".renderSearchList").text())(b)),a(".ui-goods").click(function(){var b=a(this).attr("usedNoBei");location.href="http://paipai.m.jd.com/m/goods_detail.html?usedNo="+b})},renderSearchListBeihtml:function(b){b=b||[],a(".ui-goods-box2-bei").html(c.template(a(".renderSearchList").text())(b)),a(".ui-goods-box-bei").html(c.template(a(".renderSearchList").text())(b)),a(".ui-goods").click(function(){var b=a(this).attr("usedNoBei");location.href="//paipai.m.jd.com/m/goods_detail.html?usedNo="+b})},renderSearchFilterlist:function(b){var d=c.template(a(".renderSearchFilterlist").text())(b);a(".ui-nav-class").html(d),b=b||[]},renderSearchBrandlist:function(b){b=b||[],a(".ui-area-class .ui-class").html(c.template(a(".renderSearchBrandlist").text())(b))},renderSearchextAttrList:function(b){b=b||[],a(".ui-area-class-color .ui-class").html(c.template(a(".renderSearchextAttrList").text())(b))},renderSearchextServiceList:function(b){b=b||[],a(".top-content ul").html(c.template(a(".renderSearchextServiceList").text())(b))},renderSearchextPriceList:function(b){b=b||[],a(".priceSection").html(c.template(a(".renderSearchextPriceList").text())(b))},renderSearchextSeleatBrandList:function(b){b=b||[],d.brandList&&d.brandList.length>0&&a(".item-brand").html(c.template(a(".renderSearchextSeleatBrandList").text())(b))},renderSearchextSeleatColorList:function(b){b=b||[],d.extAttrList&&d.extAttrList.length>0&&a("#item-color").html(c.template(a(".renderSearchextSeleatColorList").text())(b))},renderSearchextSeleatCatList:function(b){b=b||[],d.catList&&d.catList.length>0&&a(".panel-list ul").html(c.template(a(".renderSearchextSeleatCatList").text())(b))}},d.init()});