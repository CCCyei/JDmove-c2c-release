require(["jquery","utils","dot"],function(a,b,c){"use strict";var d=({skuId:b.getUrlParam("skuId")},{init:function(){d.getResellList(),d.loadOrOpenApp(),a(".ui-close").click(function(){a(this).parents(".ui-open").hide(),a(this).parents(".ui-down").hide()})},loadOrOpenApp:function(){function b(){var a=Date.now(),b=document.createElement("iframe");b.src=c.indexOf("os")>0?d.state().scheme_IOS:d.state().scheme_Adr,b.style.display="none",document.body.appendChild(b);var e=setTimeout(function(){var b=Date.now();(!a||b-a<d.timeout+200)&&(window.location=(c.indexOf("os")>0,"downLoad.html"))},d.timeout);window.onblur=function(){clearTimeout(e)},document.addEventListener("visibilitychange",function(){clearTimeout(e)})}var c=navigator.userAgent.toLowerCase(),d={state:function(){return{scheme_IOS:"openapp.paipai://secondKill/app",scheme_Adr:"openapp.paipai://secondKill/app"}},timeout:1e3};a("#ui-btn").unbind("click").bind("click",b)},getResellList:function(){var c={url:b.getHost()+"/search/v1/secKill",data:{secKillId:"",key:""}};b.load(c).then(function(c){b.log("获取拍拍秒杀"+JSON.stringify(c)),console.log(c),"0"===c.code?c.data.secKillList&&c.data.secKillList.length>0?d.renderResellListInfo(c.data.secKillList[0].items):(a(".bgview").removeClass("hide"),a(".bgview p").text("没有秒杀商品~")):b.isNotEmpty(c.tip)?b.lightToast(c.tip):b.lightToast("获取拍拍秒杀列表异常")},function(a){})},renderResellListInfo:function(b){b=b||[],a(".ui-box").append(c.template(a(".renderResellListInfo").text())(b))}});d.init()});