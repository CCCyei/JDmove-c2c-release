function showDate(a){var b=!1;return 36e3>nowDate-a/1e3&&(b=!0),b}var nowDate=0;window.devicePixelRatio&&window.devicePixelRatio>=2&&$(".cpf-kinds-content").addClass("hairlines"),require(["jquery","utils","dot","ext","share","fastclick"],function(a,b,c,d,e,f){"use strict";f.attach(document.body);var g,h={init:function(){h.initScroll(),h.initPara(),h.goScroll(),h.addClick(),3==b.getType()?(d.init(),a(".btn-public").addClass("ui-hide")):a(".btn-public").removeClass("ui-hide"),h.initShareInfo(),window.devicePixelRatio&&window.devicePixelRatio>=2&&a(".cpf-kinds-content").addClass("hairlines"),h.setShare()},initPara:function(){var c=b.getParameter("pool_1"),d=b.getParameter("title");a("title").html(d);var e={method:"h5TitleEdit",params:{key1:d}};if(b.setAppInfo(e),2==b.getType()){var f=a("body"),g=a('<iframe src="//www.jd.com/favicon.ico" style="display:none;"></iframe>');g.on("load",function(){setTimeout(function(){g.off("load").remove()},0)}).appendTo(f)}h.req.getAds(c)},isFirst:!0,para:{kindsWidth:2e3,item:[],num:1,top:"",firstTime:0,isLast:!1},addClick:function(){a("#kindsShow").undelegate("li","click").delegate("li","click",function(){a(this).addClass("curr").siblings().removeClass("curr"),a("#kindsShow b").addClass("ui-hide"),a(this).find("b").removeClass("ui-hide");var c=a(this).data("poolid");b.isNotEmpty(c)&&h.req.getPoolItem(c)}),a(".cpf-list").undelegate(".item-heart","click").delegate(".item-heart","click",function(){var b=a(this),c=b.data("tag"),d=b.data("commentid"),e=parseInt(b.data("num")),f="";0==c?(c=1,f="image/icon_heart.png",e-=1):(c=0,f="image/icon_heart_se.png",e+=1),h.req.savaInterest(d,c,function(){b.html('<img src="'+f+'">'+e),b.data("tag",c),b.data("num",e)})}),a(".item-img-list").undelegate("li","click").delegate("li","click",function(){var b=a(this).data("commentid");location.href='openapp.paipai://pushToC2CDetail/app?param={"key1":'+b+"}"}),a(".cp-floor").undelegate(".item-comment","click").delegate(".item-comment","click",function(){var b=a(this).data("commentid");location.href='openapp.paipai://pushToC2CDetail/app?param={"key1":'+b+"}"}),a(".cp-floor").undelegate(".item-title","click").delegate(".item-title","click",function(){var b=a(this).data("commentid");location.href='openapp.paipai://pushToC2CDetail/app?param={"key1":'+b+"}"}),a(".btn-tap").unbind("click").bind("click",function(){b.setDoubleClick(function(){location.href="openapp.paipai://publish/app"})}),a(".cpf-item").undelegate(".it-left img","click").delegate(".it-left img","click",function(){var b=a(this).data("uin");location.href='openapp.paipai://getUserInfo/app?param={"uin":"'+b+'"}'})},initShareInfo:function(){var a={method:"setAPPInfo",params:{type:1,title:"拍拍二手- 京东订单一键转卖",subTitle:"自主定价、信息真实、最大程度保障交易安全",shareUrl:"//paipai.m.jd.com/c2c/channelPage.html"}};b.setAppInfo(a);var c={method:"setAPPInfo",params:{type:2,title:"标题",searchType:1,key:"手机"}};b.setAppInfo(c)},setShare:function(){var a,c={url:"//paipai.m.jd.com/c2c/channelPage.html",title:"拍拍二手- 京东订单一键转卖",qzone_title:"拍拍二手- 京东订单一键转卖",wechat_title:"拍拍二手- 京东订单一键转卖",wechat_time_title:"自主定价、信息真实、最大程度保障交易安全",wechat_desc:"自主定价、信息真实、最大程度保障交易安全",qq_desc:"自主定价、信息真实、最大程度保障交易安全",qzone_desc:"自主定价、信息真实、最大程度保障交易安全",img:"https://paipai.m.jd.com/c2c/image/pai-2x.png",isCallBack:"Y"};a="h5"==b.getLoginType()?"":"jd",setTimeout(e.init(c,a),300)},initScroll:function(){window.addEventListener("scroll",function(){var c=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,d=b.setUrlParam(window.location.href,"translateY",c),e=(new Date).getTime(),f=h.para.firstTime;e-f>5e3&&(h.para.firstTime=e,history.replaceState("",document.title,d)),b.scrollLoad({loadData:function(){h.para.num++,h.req.getPoolItem(!0)}}),c>h.para.top?a(".cpf-kinds-list").css({position:"fixed",top:"0"}):a(".cpf-kinds-list").css({position:"relative",top:"0"})})},goScroll:function(){var a=b.getParameter("translateY");null!=a&&window.scrollTo(0,a)},req:{getAds:function(c){var d={url:b.getHost()+"/cms",data:{ids:c}};b.load(d).then(function(d){var e;"0"==d.code?"pool_1"==c?(e=d.data.pool_1,h.render.pool(e),a("#kindsShow").attr("clstag","pageclick|keycount|PaiPai_201712112|6")):"pool_2"==c?(e=d.data.pool_2,h.render.pool(e),a("#kindsShow").attr("clstag","pageclick|keycount|PaiPai_201712112|7")):"pool_3"==c&&(e=d.data.pool_3,h.render.pool(e),a("#kindsShow").attr("clstag","pageclick|keycount|PaiPai_201712112|8")):b.isNotEmpty(d.tip)?b.lightToast(d.tip):console.log("广告信息获取异常")},function(a){b.lightToast("网络有误 请再试一次")})},getPoolItem:function(c){b.isEmpty(c)&&(h.para.num=1);var d=a("#kindsShow  .curr").data("poolid");if(b.isNotEmpty(d)){var e={url:b.getHost()+"/item/v1/getPoolItem",data:{poolId:d,pageIndex:h.para.num,pageSize:10}};b.load(e).then(function(a){h.isLoading=!1,nowDate=a.currentTime,"0"==a.code?(h.render.itemList(a.data),b.isEmpty(a.data)||b.isNotEmpty(a.data)&&0==a.data.length?h.para.isLast=!0:h.para.isLast=!1):b.isNotEmpty(a.tip)?b.lightToast(a.tip):console.log("获取商品池信息异常")},function(a){b.lightToast("网络有误 请再试一次"),b.para.last++})}},savaInterest:function(a,c,d){var e={url:b.getHost()+"/interest/save",data:{commodityId:a,isInterest:c}};b.load(e).then(function(a){"0"==a.code?(0==c&&b.lightToast("收藏成功在我的收藏查看"),b.isNotEmpty(d)&&d()):b.isNotEmpty(a.tip)?b.lightToast(a.tip):console.log("获取商品池信息异常")},function(a){b.lightToast("网络有误 请再试一次")})}},render:{channelAd:function(d){d=d||[],d.length>0?a(".cpt-img ul").html(c.template(a(".channelAd").text())(d)):b.log("广告数据异常"),h.addClick()},pool:function(d){d=d||[],d.length>0?a("#kindsShow").html(c.template(a(".pool").text())(d)):b.log("广告数据异常"),h.setPoolSelect(),h.addClick()},scrollBanner:function(d){if(d=d||[],d=[{title:"title",desc:"desc"},{title:"title",desc:"desc"},{title:"title",desc:"desc"},{title:"title",desc:"desc"},{title:"title",desc:"desc"},{title:"title",desc:"desc"}],d.length>0?a("#scroll-banner ul").html(c.template(a(".scrollBanner").text())(d)):b.log("广告数据异常"),a("#scroll-banner ul").length>0){var e=a("#scroll-banner");b.isNotEmpty(g)&&clearInterval(g),g=setInterval(function(){b.scrollNews(e)},3e3)}h.addClick()},itemList:function(b){b&&b.length>0?(h.para.item=b,1!=h.para.num?a(".cpf-list").append(c.template(a(".itemList").text())(b)):(a(".cpf-list").html(c.template(a(".itemList").text())(b)),window.scrollTo(0,0)),a(".cpf-list").removeClass("hide"),a(".bgview").addClass("hide")):1==h.para.num&&(a(".bgview").removeClass("hide"),a(".cpf-list").addClass("hide"),a(".bgview p").text("你查看的商品不见了~")),h.addClick()}},setPoolSelect:function(){var c=b.getParameter("poolId");b.isNotEmpty(c)?a("#kindsShow li").each(function(){a(this).data("poolid")==c&&a(this).click()}):a("#kindsShow li").first().click()}};h.init()});